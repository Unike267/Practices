name: Pipeline

on:
  push:
  pull_request:
  workflow_dispatch:

jobs:


  Acceler_test:
    runs-on: ubuntu-latest

    steps:

      - name: 'ðŸ§° Checkout'
        uses: actions/checkout@v3

      - name: 'Run vunit test benchs'
        uses: docker://gcr.io/hdl-containers/sim/osvb
        with:
          args: ./acceler/vunit_run.py -v
  
  Synth_Slink:
    runs-on: ubuntu-latest

    steps:

      - name: 'ðŸ§° Checkout'
        uses: actions/checkout@v3

      - uses: docker://gcr.io/hdl-containers/impl/icestorm
        with:
          args: ./synth/synth_with_acceler_slink.sh
       
      - name: 'ðŸ“¤ Upload artifact'
        uses: actions/upload-artifact@v3
        with:
          name: Synth_Slink
          path: |
            ./synth/all_design.vhd
            ./synth/neorv32_test_top.json
            
